{
    "text": "{\"tiddlers\":{\"$:/plugins/oflg/fishing-analysis/heatmap.js\":{\"title\":\"$:/plugins/oflg/fishing-analysis/heatmap.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oflg/fishing-analysis/heatmap.js\\ntype: application/javascript\\nmodule-type: echarts-component\\nCalendar Heatmap for Fishing.\\n\\\\*/\\nexports.shouldUpdate = \\\"[{$:/temp/fishing!!year}]\\\";\\n\\nexports.onUpdate = function (myChart) {\\n    var heatmapLan = $tw.wiki.filterTiddlers(\\\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[heatmap]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[heatmap]]\\\")[0],\\n        dueLan = $tw.wiki.filterTiddlers(\\\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[due]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[due]]\\\")[0],\\n        reviewLan = $tw.wiki.filterTiddlers(\\\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[review]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[review]]\\\")[0],\\n        year1stLan = $tw.wiki.filterTiddlers(\\\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[year1st]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[year1st]]\\\")[0],\\n        year2stLan = $tw.wiki.filterTiddlers(\\\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[year2st]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[year2st]]\\\")[0];\\n\\n    var year = Number($tw.wiki.filterTiddlers(\\\"[{$:/temp/fishing!!year}]\\\")[0]) || new Date().getFullYear();\\n\\n    var fishArry = $tw.wiki.filterTiddlers(\\\"[has[due]][has[history]]\\\");\\n\\n    var dueDayArry = [];\\n    var reviewDayArry = [];\\n\\n    function twTime2twDayArry(twTime, dayArry) {\\n        var day = $tw.wiki.filterTiddlers(\\\"[[\\\" + twTime + \\\"]format:date[YYYY-0MM-0DD]]\\\")[0];\\n\\n        var dayIndex = (dayArry).findIndex((df) => df[0] == day);\\n\\n        if (dayIndex == -1) {\\n            dayArry.push([\\n                day,\\n                1\\n            ]);\\n\\n        } else {\\n            dayArry.splice(dayIndex, 1, [\\n                day,\\n                dayArry[dayIndex][1] + 1\\n            ]);\\n        }\\n    }\\n\\n    for (var f = 0; f < fishArry.length; f++) {\\n\\n        var fishDue = $tw.wiki.filterTiddlers(\\\"[{\\\" + fishArry[f] + \\\"!!due}]\\\")[0],\\n            fishReview = $tw.wiki.filterTiddlers(\\\"[{\\\" + fishArry[f] + \\\"!!review}]\\\")[0],\\n            fishHistoryArry = JSON.parse($tw.wiki.filterTiddlers(\\\"[{\\\" + fishArry[f] + \\\"!!history}]\\\")[0] || \\\"[]\\\");\\n\\n        if (fishDue) {\\n            twTime2twDayArry(fishDue, dueDayArry);\\n        }\\n\\n        if (fishReview) {\\n            twTime2twDayArry(fishReview, reviewDayArry);\\n        }\\n\\n        if (fishHistoryArry.length > 0) {\\n\\n            for (var h = 0; h < fishHistoryArry.length; h++) {\\n                var historyReview = fishHistoryArry[h].review;\\n\\n                twTime2twDayArry(historyReview, reviewDayArry);\\n            }\\n\\n        }\\n    }\\n\\n    var option = {\\n        title: {\\n            top: 0,\\n            text: year,\\n            subtext: heatmapLan,\\n            left: \\\"center\\\",\\n            textStyle: {\\n                color: \\\"\\\"\\n            }\\n        },\\n        tooltip: {\\n            trigger: \\\"item\\\"\\n        },\\n        legend: {\\n            top: \\\"50\\\",\\n            left: \\\"center\\\",\\n            data: [reviewLan, dueLan],\\n            textStyle: {\\n                color: \\\"\\\"\\n            }\\n        },\\n        calendar: [\\n            {\\n                top: 100,\\n                left: \\\"center\\\",\\n                range: [year + \\\"-01-01\\\", year + \\\"-06-30\\\"],\\n                splitLine: {\\n                    show: true,\\n                    lineStyle: {\\n                        color: \\\"#000\\\",\\n                        width: 4,\\n                        type: \\\"solid\\\"\\n                    }\\n                },\\n                yearLabel: {\\n                    formatter: year1stLan\\n                },\\n                itemStyle: {\\n                    color: \\\"#323c48\\\",\\n                    borderWidth: 1,\\n                    borderColor: \\\"#111\\\"\\n                }\\n            },\\n            {\\n                top: 300,\\n                left: \\\"center\\\",\\n                range: [year + \\\"-07-01\\\", year + \\\"-12-31\\\"],\\n                splitLine: {\\n                    show: true,\\n                    lineStyle: {\\n                        color: \\\"#000\\\",\\n                        width: 4,\\n                        type: \\\"solid\\\"\\n                    }\\n                },\\n                yearLabel: {\\n                    formatter: year2stLan\\n                },\\n                itemStyle: {\\n                    color: \\\"#323c48\\\",\\n                    borderWidth: 1,\\n                    borderColor: \\\"#111\\\"\\n                }\\n            }\\n        ],\\n        series: [\\n            {\\n                name: reviewLan,\\n                type: \\\"scatter\\\",\\n                coordinateSystem: \\\"calendar\\\",\\n                data: reviewDayArry,\\n                symbolSize: function (val) {\\n                    return val[1] <= 20 ? val[1] : 20;\\n                },\\n                itemStyle: {\\n                    color: \\\"#ddb926\\\"\\n                }\\n            },\\n            {\\n                name: reviewLan,\\n                type: \\\"scatter\\\",\\n                coordinateSystem: \\\"calendar\\\",\\n                calendarIndex: 1,\\n                data: reviewDayArry,\\n                symbolSize: function (val) {\\n                    return val[1] <= 20 ? val[1] : 20;\\n                },\\n                itemStyle: {\\n                    color: \\\"#ddb926\\\"\\n                }\\n            },\\n            {\\n                name: dueLan,\\n                type: \\\"effectScatter\\\",\\n                coordinateSystem: \\\"calendar\\\",\\n                calendarIndex: 1,\\n                data: dueDayArry,\\n                symbolSize: function (val) {\\n                    return val[1] <= 20 ? val[1] : 20;\\n                },\\n                showEffectOn: \\\"render\\\",\\n                rippleEffect: {\\n                    brushType: \\\"stroke\\\"\\n                },\\n                itemStyle: {\\n                    color: \\\"#f4e925\\\",\\n                    shadowBlur: 10,\\n                    shadowColor: \\\"#333\\\"\\n                },\\n                zlevel: 1\\n            },\\n            {\\n                name: dueLan,\\n                type: \\\"effectScatter\\\",\\n                coordinateSystem: \\\"calendar\\\",\\n                data: dueDayArry,\\n                symbolSize: function (val) {\\n                    return val[1] <= 20 ? val[1] : 20;\\n                },\\n                showEffectOn: \\\"render\\\",\\n                rippleEffect: {\\n                    brushType: \\\"stroke\\\"\\n                },\\n                itemStyle: {\\n                    color: \\\"#f4e925\\\",\\n                    shadowBlur: 10,\\n                    shadowColor: \\\"#333\\\"\\n                },\\n                zlevel: 1\\n            }\\n        ]\\n    };\\n\\n    option && myChart.setOption(option);\\n\\n};\",\"type\":\"application/javascript\",\"module-type\":\"echarts-component\"},\"$:/plugins/oflg/fishing-analysis/heatmap\":{\"title\":\"$:/plugins/oflg/fishing-analysis/heatmap\",\"caption\":\"<$text text={{{[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[fishing]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[fishing]]}}}/>\",\"tags\":\"fishing-analysis $:/tags/SideBar\",\"text\":\"<div\\n    style=\\\"display:flex;justify-content:space-between;margin-bottom:-30px;\\\"\\n>\\n    <$button\\n        set=\\\"$:/temp/fishing!!year\\\"\\n        setTo={{{[{$:/temp/fishing!!year}subtract[1]!match[-1]]~[<now YYYY>subtract[1]]}}}\\n        class=\\\"tc-btn-invisible tc-tiddlylink\\\"\\n        style=\\\"font-size:25pt;\\\"\\n    >\\n        ◂\\n    </$button>\\n    <$button\\n        set=\\\"$:/temp/fishing!!year\\\"\\n        setTo={{{[{$:/temp/fishing!!year}add[1]!match[1]]~[<now YYYY>add[1]]}}}\\n        class=\\\"tc-btn-invisible tc-tiddlylink\\\"\\n        style=\\\"font-size:25pt;\\\"\\n    >\\n        ▸\\n    </$button>\\n</div>\\n\\n<$echarts\\n    $tiddler=\\\"$:/plugins/oflg/fishing-analysis/heatmap.js\\\"\\n    $height=\\\"500px\\\"\\n/>\"},\"$:/plugins/oflg/fishing-analysis/icon\":{\"title\":\"$:/plugins/oflg/fishing-analysis/icon\",\"tags\":\"$:/tags/Image\",\"text\":\"<svg width=\\\"22px\\\" height=\\\"22px\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <g id=\\\"fishing-analysis\\\">\\n    <path d=\\\"M0 0L1024 0L1024 1024L0 1024L0 0Z\\\" id=\\\"Background\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" stroke=\\\"none\\\" />\\n    <g clip-path=\\\"url(#mask_1)\\\">\\n      <path d=\\\"M260.46 667.8C235.68 625.03 221.5 575.36 221.5 522.38L512 522.38L260.46 667.8L260.46 667.8Z\\\" id=\\\"Shape\\\" fill=\\\"#3D4265\\\" fill-rule=\\\"evenodd\\\" stroke=\\\"none\\\" />\\n      <path d=\\\"M167.24 713.76L512 522.38L614.06 903.29C581.51 911.99 547.29 916.63 512 916.63C363.72 916.62 234.55 834.76 167.24 713.76L167.24 713.76ZM871.46 314.84C906.78 375.89 927 446.77 927 522.38C927 559.53 922.12 595.55 912.96 629.82L512 522.38L871.46 314.84L871.46 314.84ZM97 522.38C97 293.18 282.8 107.38 512 107.38L512 522.38L97 522.38L97 522.38Z\\\" id=\\\"Shape\\\" fill=\\\"#5778D8\\\" fill-rule=\\\"evenodd\\\" stroke=\\\"none\\\" />\\n      <path d=\\\"M512 190.38C634.81 190.38 742.04 257.06 799.47 356.19L512 522.38L512 190.38L512 190.38ZM772.62 592.21C747.81 685.06 674.69 758.18 581.83 783L512 522.38L772.62 592.21L772.62 592.21Z\\\" id=\\\"Shape\\\" fill=\\\"#3D4265\\\" fill-rule=\\\"evenodd\\\" stroke=\\\"none\\\" />\\n      <path d=\\\"M408.25 522.38C408.25 579.679 454.7 626.13 512 626.13C569.299 626.13 615.75 579.68 615.75 522.381C615.75 465.081 569.3 418.63 512 418.63C454.701 418.63 408.25 465.08 408.25 522.38L408.25 522.38Z\\\" id=\\\"Shape\\\" fill=\\\"#C3D2FB\\\" fill-rule=\\\"evenodd\\\" stroke=\\\"none\\\" />\\n    </g>\\n  </g>\\n</svg>\"},\"$:/plugins/oflg/fishing-analysis/languages/en-GB\":{\"title\":\"$:/plugins/oflg/fishing-analysis/languages/en-GB\",\"type\":\"application/json\",\"text\":\"{\\n    \\\"fishing\\\": \\\"Fishing\\\",\\n    \\\"heatmap\\\": \\\"Fishing Heatmap\\\",\\n    \\\"due\\\": \\\"Due\\\",\\n    \\\"review\\\": \\\"Review\\\",\\n    \\\"year1st\\\": \\\"1st\\\",\\n    \\\"year2st\\\": \\\"2st\\\"\\n}\"},\"$:/plugins/oflg/fishing-analysis/languages/zh-Hans\":{\"title\":\"$:/plugins/oflg/fishing-analysis/languages/zh-Hans\",\"type\":\"application/json\",\"text\":\"{\\n    \\\"fishing\\\": \\\"钓鱼\\\",\\n    \\\"heatmap\\\": \\\"钓鱼热力图\\\",\\n    \\\"due\\\": \\\"到期\\\",\\n    \\\"review\\\": \\\"复习\\\",\\n    \\\"year1st\\\": \\\"上半年\\\",\\n    \\\"year2st\\\": \\\"下半年\\\"\\n}\"},\"$:/plugins/oflg/fishing-analysis/license\":{\"title\":\"$:/plugins/oflg/fishing-analysis/license\",\"text\":\"\\nMIT License\\n\\nCopyright (c) 2022 oflg\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE.\"},\"$:/plugins/oflg/fishing-analysis/readme\":{\"title\":\"$:/plugins/oflg/fishing-analysis/readme\",\"text\":\"Installation and usage tutorial is available at [[Fishing Manual|https://oflg.github.io/fishing/]].\\n\\n可在 [[钓鱼手册|https://oflg.github.io/fishing/]] 查看安装使用教程。\\n\"}}}",
    "type": "application/json",
    "author": "oflg",
    "core-version": ">=5.2.1",
    "dependents": "$:/plugins/Gk0Wk/echarts",
    "description": "Analysis for Fishing",
    "list": "readme license",
    "name": "Fishing Analysis",
    "parent-plugin": "$:/plugins/oflg/fishing",
    "plugin-type": "plugin",
    "source": "https://github.com/oflg/fishing-analysis",
    "title": "$:/plugins/oflg/fishing-analysis",
    "version": "0.0.1",
    "revision": "0",
    "bag": "default"
}