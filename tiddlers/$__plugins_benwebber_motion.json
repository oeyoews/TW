{"tiddlers":{"$:/plugins/benwebber/motion/Acknowledgements":{"title":"$:/plugins/benwebber/motion/Acknowledgements","text":"This project incorporates code from [[Mousetrap|https://craig.is/killing/mice]].\n"},"$:/plugins/benwebber/motion/License":{"title":"$:/plugins/benwebber/motion/License","text":"! MIT License\n\nCopyright (c) 2022, Ben Webber\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"},"$:/plugins/benwebber/motion/README":{"title":"$:/plugins/benwebber/motion/README","text":"\\define plugin() $:/plugins/benwebber/motion\n\\define install()\n<$list\n  filter=\"[<transclusion>prefix[{$(plugin)$/README|$(plugin)$/README|||}]]\"\n  emptyMessage=\"$(plugin)$\"\n>\n{{ $(plugin)$||$:/core/ui/Components/plugin-info }}\n</$list>\n\\end\n\nVim-like keyboard shortcuts for ~TiddlyWiki.\n\n!! Install\n\n[[Manually install|https://tiddlywiki.com/#Manually%20installing%20a%20plugin]] the plugin by dragging this link to your ~TiddlyWiki:\n\n<<install>>\n\nThen save and refresh your ~TiddlyWiki.\n\n!! Usage\n\nPress <kbd>{{$:/plugins/benwebber/motion/config/Shortcuts/ShowHelp/Key}}</kbd> to show keyboard shortcuts.\n"},"$:/config/Search/AutoFocus":{"title":"$:/config/Search/AutoFocus","text":"false\n"},"$:/plugins/benwebber/motion/config/Shortcuts/FocusSearch/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/FocusSearch/Key","text":"/"},"$:/plugins/benwebber/motion/config/Shortcuts/FocusSearch/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/FocusSearch/Caption","text":"Focus search"},"$:/plugins/benwebber/motion/config/Shortcuts/ShowHelp/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/ShowHelp/Key","text":"?"},"$:/plugins/benwebber/motion/config/Shortcuts/ShowHelp/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/ShowHelp/Caption","text":"Show this help message"},"$:/plugins/benwebber/motion/config/Shortcuts/CreateNewTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/CreateNewTiddler/Key","text":"n"},"$:/plugins/benwebber/motion/config/Shortcuts/CreateNewTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/CreateNewTiddler/Caption","text":"Create a new tiddler"},"$:/plugins/benwebber/motion/config/Shortcuts/SelectNextTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/SelectNextTiddler/Key","text":"j"},"$:/plugins/benwebber/motion/config/Shortcuts/SelectNextTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/SelectNextTiddler/Caption","text":"Select next tiddler in story river"},"$:/plugins/benwebber/motion/config/Shortcuts/SelectPreviousTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/SelectPreviousTiddler/Key","text":"k"},"$:/plugins/benwebber/motion/config/Shortcuts/SelectPreviousTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/SelectPreviousTiddler/Caption","text":"Select previous tiddler in story river"},"$:/plugins/benwebber/motion/config/Shortcuts/EditTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/EditTiddler/Key","text":"e"},"$:/plugins/benwebber/motion/config/Shortcuts/EditTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/EditTiddler/Caption","text":"Edit selected tiddler"},"$:/plugins/benwebber/motion/config/Shortcuts/CloseTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/CloseTiddler/Key","text":"x"},"$:/plugins/benwebber/motion/config/Shortcuts/CloseTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/CloseTiddler/Caption","text":"Close selected tiddler"},"$:/plugins/benwebber/motion/config/Shortcuts/CloseAllTiddlers/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/CloseAllTiddlers/Key","text":"X"},"$:/plugins/benwebber/motion/config/Shortcuts/CloseAllTiddlers/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/CloseAllTiddlers/Caption","text":"Close all tiddlers"},"$:/plugins/benwebber/motion/config/Shortcuts/FoldTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/FoldTiddler/Key","text":"z c"},"$:/plugins/benwebber/motion/config/Shortcuts/FoldTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/FoldTiddler/Caption","text":"Fold selected tiddler"},"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldTiddler/Key","text":"z o"},"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldTiddler/Caption","text":"Unfold selected tiddler"},"$:/plugins/benwebber/motion/config/Shortcuts/ToggleTiddler/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/ToggleTiddler/Key","text":"z a"},"$:/plugins/benwebber/motion/config/Shortcuts/ToggleTiddler/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/ToggleTiddler/Caption","text":"Toggle folding for selected tiddler"},"$:/plugins/benwebber/motion/config/Shortcuts/FoldAllTiddlers/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/FoldAllTiddlers/Key","text":"z C"},"$:/plugins/benwebber/motion/config/Shortcuts/FoldAllTiddlers/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/FoldAllTiddlers/Caption","text":"Fold all tiddlers"},"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldAllTiddlers/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldAllTiddlers/Key","text":"z O"},"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldAllTiddlers/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/UnfoldAllTiddlers/Caption","text":"Unfold all tiddlers"},"$:/plugins/benwebber/motion/config/Shortcuts/ToggleAllTiddlers/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/ToggleAllTiddlers/Key","text":"z A"},"$:/plugins/benwebber/motion/config/Shortcuts/ToggleAllTiddlers/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/ToggleAllTiddlers/Caption","text":"Toggle folding for all tiddlers"},"$:/plugins/benwebber/motion/config/Shortcuts/Dismiss/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/Dismiss/Key","text":"esc"},"$:/plugins/benwebber/motion/config/Shortcuts/Dismiss/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/Dismiss/Caption","text":"Dismiss selection"},"$:/plugins/benwebber/motion/config/Shortcuts/SaveWiki/Key":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/SaveWiki/Key","text":"w"},"$:/plugins/benwebber/motion/config/Shortcuts/SaveWiki/Caption":{"title":"$:/plugins/benwebber/motion/config/Shortcuts/SaveWiki/Caption","text":"Save wiki"},"$:/plugins/benwebber/motion/Help":{"title":"$:/plugins/benwebber/motion/Help","subtitle":"Keyboard shortcuts","class":"motion-help","text":"\\define shortcut(shortcut)\n<$set name=kbd filter=\"[enlist{$:/plugins/benwebber/motion/config/Shortcuts/$shortcut$/Key}addprefix[<kbd>]addsuffix[</kbd>]]\">\n<tr>\n  <td class=\"motion-border-none motion-p-1\"><<kbd>></td>\n  <td class=\"motion-border-none motion-p-1\"><$transclude tiddler=\"$:/plugins/benwebber/motion/config/Shortcuts/$shortcut$/Caption\" /></td>\n</tr>\n</$set>\n\\end\n\n<div class=\"motion-flex motion-justify-around\">\n<div>\n<h4>General</h4>\n\n<table class=\"motion-border-none\">\n<$list filter=\"[enlist[FocusSearch ShowHelp Dismiss]]\">\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\n</$list>\n</table>\n\n<h4>Story River</h4>\n\n<table class=\"motion-border-none\">\n<$list filter=\"[enlist[CreateNewTiddler SelectNextTiddler SelectPreviousTiddler EditTiddler CloseTiddler CloseAllTiddlers]]\">\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\n</$list>\n</table>\n</div>\n\n<div>\n<h4>Folding</h4>\n\n<table class=\"motion-border-none\">\n<$list filter=\"[enlist[FoldTiddler UnfoldTiddler ToggleTiddler FoldAllTiddlers UnfoldAllTiddlers ToggleAllTiddlers]]\">\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\n</$list>\n</table>\n</div>\n</div>\n"},"$:/plugins/benwebber/motion/modules/mousetrap.min.js":{"title":"$:/plugins/benwebber/motion/modules/mousetrap.min.js","text":"/*\\\ntitle: $:/plugins/benwebber/motion/modules/mousetrap.min.js\ntype: application/javascript\nmodule-type: library\n\\*/\n/* mousetrap v1.6.5 craig.is/killing/mice */\n(function(q,u,c){function v(a,b,g){a.addEventListener?a.addEventListener(b,g,!1):a.attachEvent(\"on\"+b,g)}function z(a){if(\"keypress\"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return n[a.which]?n[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function F(a){var b=[];a.shiftKey&&b.push(\"shift\");a.altKey&&b.push(\"alt\");a.ctrlKey&&b.push(\"ctrl\");a.metaKey&&b.push(\"meta\");return b}function w(a){return\"shift\"==a||\"ctrl\"==a||\"alt\"==a||\n\"meta\"==a}function A(a,b){var g,d=[];var e=a;\"+\"===e?e=[\"+\"]:(e=e.replace(/\\+{2}/g,\"+plus\"),e=e.split(\"+\"));for(g=0;g<e.length;++g){var m=e[g];B[m]&&(m=B[m]);b&&\"keypress\"!=b&&C[m]&&(m=C[m],d.push(\"shift\"));w(m)&&d.push(m)}e=m;g=b;if(!g){if(!p){p={};for(var c in n)95<c&&112>c||n.hasOwnProperty(c)&&(p[n[c]]=c)}g=p[e]?\"keydown\":\"keypress\"}\"keypress\"==g&&d.length&&(g=\"keydown\");return{key:m,modifiers:d,action:g}}function D(a,b){return null===a||a===u?!1:a===b?!0:D(a.parentNode,b)}function d(a){function b(a){a=\na||{};var b=!1,l;for(l in p)a[l]?b=!0:p[l]=0;b||(x=!1)}function g(a,b,t,f,g,d){var l,E=[],h=t.type;if(!k._callbacks[a])return[];\"keyup\"==h&&w(a)&&(b=[a]);for(l=0;l<k._callbacks[a].length;++l){var c=k._callbacks[a][l];if((f||!c.seq||p[c.seq]==c.level)&&h==c.action){var e;(e=\"keypress\"==h&&!t.metaKey&&!t.ctrlKey)||(e=c.modifiers,e=b.sort().join(\",\")===e.sort().join(\",\"));e&&(e=f&&c.seq==f&&c.level==d,(!f&&c.combo==g||e)&&k._callbacks[a].splice(l,1),E.push(c))}}return E}function c(a,b,c,f){k.stopCallback(b,\nb.target||b.srcElement,c,f)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function e(a){\"number\"!==typeof a.which&&(a.which=a.keyCode);var b=z(a);b&&(\"keyup\"==a.type&&y===b?y=!1:k.handleKey(b,F(a),a))}function m(a,g,t,f){function h(c){return function(){x=c;++p[a];clearTimeout(q);q=setTimeout(b,1E3)}}function l(g){c(t,g,a);\"keyup\"!==f&&(y=z(g));setTimeout(b,10)}for(var d=p[a]=0;d<g.length;++d){var e=d+1===g.length?l:h(f||\nA(g[d+1]).action);n(g[d],e,f,a,d)}}function n(a,b,c,f,d){k._directMap[a+\":\"+c]=b;a=a.replace(/\\s+/g,\" \");var e=a.split(\" \");1<e.length?m(a,e,b,c):(c=A(a,c),k._callbacks[c.key]=k._callbacks[c.key]||[],g(c.key,c.modifiers,{type:c.action},f,a,d),k._callbacks[c.key][f?\"unshift\":\"push\"]({callback:b,modifiers:c.modifiers,action:c.action,seq:f,level:d,combo:a}))}var k=this;a=a||u;if(!(k instanceof d))return new d(a);k.target=a;k._callbacks={};k._directMap={};var p={},q,y=!1,r=!1,x=!1;k._handleKey=function(a,\nd,e){var f=g(a,d,e),h;d={};var k=0,l=!1;for(h=0;h<f.length;++h)f[h].seq&&(k=Math.max(k,f[h].level));for(h=0;h<f.length;++h)f[h].seq?f[h].level==k&&(l=!0,d[f[h].seq]=1,c(f[h].callback,e,f[h].combo,f[h].seq)):l||c(f[h].callback,e,f[h].combo);f=\"keypress\"==e.type&&r;e.type!=x||w(a)||f||b(d);r=l&&\"keydown\"==e.type};k._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)n(a[d],b,c)};v(a,\"keypress\",e);v(a,\"keydown\",e);v(a,\"keyup\",e)}if(q){var n={8:\"backspace\",9:\"tab\",13:\"enter\",16:\"shift\",17:\"ctrl\",\n18:\"alt\",20:\"capslock\",27:\"esc\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"ins\",46:\"del\",91:\"meta\",93:\"meta\",224:\"meta\"},r={106:\"*\",107:\"+\",109:\"-\",110:\".\",111:\"/\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\"},C={\"~\":\"`\",\"!\":\"1\",\"@\":\"2\",\"#\":\"3\",$:\"4\",\"%\":\"5\",\"^\":\"6\",\"&\":\"7\",\"*\":\"8\",\"(\":\"9\",\")\":\"0\",_:\"-\",\"+\":\"=\",\":\":\";\",'\"':\"'\",\"<\":\",\",\">\":\".\",\"?\":\"/\",\"|\":\"\\\\\"},B={option:\"alt\",command:\"meta\",\"return\":\"enter\",\nescape:\"esc\",plus:\"+\",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?\"meta\":\"ctrl\"},p;for(c=1;20>c;++c)n[111+c]=\"f\"+c;for(c=0;9>=c;++c)n[c+96]=c.toString();d.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};d.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};d.prototype.trigger=function(a,b){if(this._directMap[a+\":\"+b])this._directMap[a+\":\"+b]({},a);return this};d.prototype.reset=function(){this._callbacks={};\nthis._directMap={};return this};d.prototype.stopCallback=function(a,b){if(-1<(\" \"+b.className+\" \").indexOf(\" mousetrap \")||D(b,this.target))return!1;if(\"composedPath\"in a&&\"function\"===typeof a.composedPath){var c=a.composedPath()[0];c!==a.target&&(b=c)}return\"INPUT\"==b.tagName||\"SELECT\"==b.tagName||\"TEXTAREA\"==b.tagName||b.isContentEditable};d.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};d.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(n[b]=a[b]);p=null};\n  d.init=function(){var a=d(u),b;for(b in a)\"_\"!==b.charAt(0)&&(d[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};d.init();q.Mousetrap=d;\"undefined\"!==typeof module&&module.exports&&(module.exports=d);\"function\"===typeof define&&define.amd&&define(function(){return d})}})(\"undefined\"!==typeof window?window:null,\"undefined\"!==typeof window?document:null);\n","type":"application/javascript","module-type":"library"},"$:/plugins/benwebber/motion/modules/startup/init.js":{"title":"$:/plugins/benwebber/motion/modules/startup/init.js","text":"/*\\\ntitle: $:/plugins/benwebber/motion/modules/startup/init.js\ntype: application/javascript\nmodule-type: startup\n\\*/\n(function() {\n'use strict';\n\nexports.platforms = ['browser'];\nexports.after = ['startup'];\nexports.synchronous = true;\n\nconst motion = {\n  selectedStateTiddlerTitle: '$:/state/plugins/benwebber/motion/selected',\n\n  init() {\n    this.navigatorWidget = this.getNavigatorWidget($tw.rootWidget);\n    $tw.hooks.addHook('th-closing-tiddler', this.handleClosingTiddler.bind(this));\n\n    const shortcuts = {\n      ShowHelp: () => {\n        this.navigatorWidget.dispatchEvent({type: 'tm-modal', param: '$:/plugins/benwebber/motion/Help'});\n        return false;\n      },\n      FocusSearch: () => {\n        this.navigatorWidget.dispatchEvent({type: 'tm-focus-selector', param: '.tc-search input'});\n        return false;\n      },\n      CreateNewTiddler: () => {\n        this.navigatorWidget.dispatchEvent({type: 'tm-new-tiddler'});\n        return false;\n      },\n      SaveWiki: () => {\n        this.navigatorWidget.dispatchEvent({type: 'tm-save-wiki'});\n        return false;\n      },\n      SelectNextTiddler: () => {\n        let selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected') || '';\n        const storyList = this.navigatorWidget.story.getStoryList();\n        if (!storyList.length) {\n          return;\n        }\n        let currentTiddlerIndex = storyList.indexOf(selectedTiddler);\n        let nextTiddlerIndex;\n        if (currentTiddlerIndex < 0) {\n          nextTiddlerIndex = 0;\n        } else {\n          nextTiddlerIndex = Math.min(currentTiddlerIndex + 1, storyList.length - 1);\n        }\n        selectedTiddler = storyList[nextTiddlerIndex];\n        $tw.wiki.addTiddler({title: '$:/state/plugins/benwebber/motion/selected', text: selectedTiddler});\n        this.navigatorWidget.dispatchEvent({type: 'tm-navigate', navigateTo: selectedTiddler})\n        return false;\n      },\n      SelectPreviousTiddler: () => {\n        let selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected') || '';\n        const storyList = this.navigatorWidget.story.getStoryList();\n        if (!storyList.length) {\n          return;\n        }\n        let currentTiddlerIndex = storyList.indexOf(selectedTiddler);\n        let nextTiddlerIndex;\n        if (currentTiddlerIndex < 0) {\n          nextTiddlerIndex = 0;\n        } else {\n          nextTiddlerIndex = Math.max(currentTiddlerIndex - 1, 0);\n        }\n        selectedTiddler = storyList[nextTiddlerIndex];\n        $tw.wiki.addTiddler({title: '$:/state/plugins/benwebber/motion/selected', text: selectedTiddler});\n        this.navigatorWidget.dispatchEvent({type: 'tm-navigate', navigateTo: selectedTiddler})\n        return false;\n      },\n      EditTiddler: () => {\n        const selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected');\n        if (!selectedTiddler) {\n          return;\n        }\n        this.navigatorWidget.dispatchEvent({type: 'tm-edit-tiddler', param: selectedTiddler});\n        return false;\n      },\n      CloseTiddler: () => {\n        const selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected');\n        if (!selectedTiddler) {\n          return;\n        }\n        this.navigatorWidget.dispatchEvent({type: 'tm-close-tiddler', param: selectedTiddler});\n        return false;\n      },\n      CloseAllTiddlers: () => {\n        this.navigatorWidget.dispatchEvent({type: 'tm-close-all-tiddlers'});\n        return false;\n      },\n      ToggleTiddler: () => {\n        const selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected');\n        if (!selectedTiddler) {\n          return;\n        }\n        this.toggleTiddler(selectedTiddler);\n        return false;\n      },\n      UnfoldTiddler: () => {\n        const selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected');\n        if (!selectedTiddler) {\n          return;\n        }\n        this.unfoldTiddler(selectedTiddler);\n        return false;\n      },\n      FoldTiddler: () => {\n        const selectedTiddler = $tw.wiki.getTiddlerText('$:/state/plugins/benwebber/motion/selected');\n        if (!selectedTiddler) {\n          return;\n        }\n        this.foldTiddler(selectedTiddler);\n        return false;\n      },\n      ToggleAllTiddlers: () => {\n        const storyList = this.navigatorWidget.story.getStoryList();\n        for (const title of storyList) {\n          this.toggleTiddler(title);\n        }\n        return false;\n      },\n      FoldAllTiddlers: () => {\n        const storyList = this.navigatorWidget.story.getStoryList();\n        for (const title of storyList) {\n          this.foldTiddler(title);\n        }\n        return false;\n      },\n      UnfoldAllTiddlers: () => {\n        const storyList = this.navigatorWidget.story.getStoryList();\n        for (const title of storyList) {\n          this.unfoldTiddler(title);\n        }\n        return false;\n      },\n      Dismiss: () => {\n        // Close help modal if it's open.\n        // HACK: Close the modal by clicking the button to dispatch the internal\n        // tm-close-tiddler message.\n        const button = document.querySelector('.motion-help .tc-modal-footer button')\n        if (button) {\n          button.click();\n        }\n        // Deselect tiddler.\n        $tw.wiki.deleteTiddler('$:/state/plugins/benwebber/motion/selected');\n      },\n    };\n    for (const [name, handler] of Object.entries(shortcuts)) {\n      const shortcut = this.getShortcut(name);\n      Mousetrap.bind(shortcut, handler);\n    };\n  },\n\n  getShortcut(name) {\n    return $tw.wiki.getTiddlerText(`$:/plugins/benwebber/motion/config/Shortcuts/${name}/Key`);\n  },\n\n  handleClosingTiddler(event) {\n    const selectedTiddler = $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle);\n    if (event.param == selectedTiddler) {\n      $tw.wiki.deleteTiddler(this.selectedStateTiddlerTitle);\n    }\n    return event;\n  },\n\n  toggleTiddler(title) {\n    if ($tw.wiki.getTiddlerText(`$:/state/folded/${title}`) == 'hide') {\n      this.unfoldTiddler(title);\n    } else {\n      this.foldTiddler(title);\n    }\n  },\n\n  foldTiddler(title) {\n    $tw.wiki.setText(`$:/state/folded/${title}`, 'text', null, 'hide');\n  },\n\n  unfoldTiddler(title) {\n    $tw.wiki.deleteTiddler(`$:/state/folded/${title}`);\n  },\n\n  getNavigatorWidget(widget) {\n    const child = widget.children[0];\n    if (child.parseTreeNode.type == 'navigator') {\n      return child;\n    }\n    return this.getNavigatorWidget(child);\n  },\n\n};\n\nexports.startup = function() {\n  $tw.modules.execute('$:/plugins/benwebber/motion/modules/mousetrap.min.js');\n  motion.init();\n  window._motion = motion;\n};\n})();\n","type":"application/javascript","module-type":"startup"},"$:/plugins/benwebber/motion/styles":{"title":"$:/plugins/benwebber/motion/styles","tags":"$:/tags/Stylesheet","type":"text/vnd.tiddlywiki","text":"<$list filter=\"[{$:/state/plugins/benwebber/motion/selected}] [has[draft.of]field:draft.of{$:/state/plugins/benwebber/motion/selected}] +[escapecss[]]\">\n[data-tiddler-title=<<currentTiddler>>] {\n  outline: <<colour primary>> 1px solid;\n}\n</$list>\n\n.motion-border-none {border: none;}\n.motion-flex {display: flex;}\n.motion-justify-around {justify-content: space-around;}\n.motion-p-1 {padding: 0.25rem;}\n"}}}